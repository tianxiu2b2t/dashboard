import { prompt } from '@kit.ArkUI'
import { pasteboard, BusinessError } from '@kit.BasicServicesKit'
import { common, Want } from '@kit.AbilityKit'

@Component
export struct contact {
  build() {
    Column() {
      Column() {
        Text('è”ç³»æˆ‘ä»¬').fontSize(24).fontColor($r('app.color.diff_content')).fontWeight(FontWeight.Bold).margin(({top:8,bottom:20}))
        Column({space:5}){
          Text('ğŸ‘¥ ä¸»è¦è´Ÿè´£äºº').fontSize(18).fontWeight(FontWeight.Bold)
          Text('shenjack').fontSize(14)
          Text('  é‚®ç®±ï¼š3695888@qq.com').fontSize(14).fontColor($r('app.color.diff_content')).onClick(async () => {
            await this.copyToClipboard('3695888@qq.com', 'é‚®ç®±ï¼š3695888@qq.com')
          })
        }.width('95%').backgroundColor($r('app.color.background')).margin({bottom:10}).padding(12).borderRadius(16)
        Column({space:5}){
          Text('ğŸŒ Tç«™ç½‘é¡µè´Ÿè´£äºº').fontSize(18).fontWeight(FontWeight.Bold)
          Text('tianxiu2b2t').fontSize(14)
          Text('  é‚®ç®±ï¼šadministrator@ttb-network.top').fontSize(14).fontColor($r('app.color.diff_content')).onClick(async () => {
            await this.copyToClipboard('administrator@ttb-network.top', 'é‚®ç®±ï¼šadministrator@ttb-network.top')
          })
        }.width('95%').backgroundColor($r('app.color.background')).margin({bottom:10}).padding(12).borderRadius(16)
        Column({space:5}){
          Text('ğŸ“± é¸¿è’™åº”ç”¨å¼€å‘').fontSize(18).fontWeight(FontWeight.Bold)
          Text('Rayawa').fontSize(14)
          Text('  é‚®ç®±ï¼šrayawa.work@outlook.com').fontSize(14).fontColor($r('app.color.diff_content')).onClick(async () => {
            await this.copyToClipboard('rayawa.work@outlook.com', 'é‚®ç®±ï¼šrayawa.work@outlook.com')
          })
        }.width('95%').backgroundColor($r('app.color.background')).margin({bottom:10}).padding(12).borderRadius(16)
        Column({space:5}){
          Text('ğŸ’¬ QQç¾¤').fontSize(18).fontWeight(FontWeight.Bold)
          Text('Harmony Gallery å®˜æ–¹äº¤æµç¾¤').fontSize(14)
          Text('  ç¾¤å·ï¼š757273833').fontSize(14).fontColor($r('app.color.diff_content')).onClick(async () => {
            await this.copyToClipboard('757273833', 'QQç¾¤å·ï¼š757273833')
          })
        }.width('95%').backgroundColor($r('app.color.background')).margin({bottom:10}).padding(12).borderRadius(16)
        Column({space:5}){
          Text('â¤ï¸ èµåŠ©æˆ‘ä»¬').fontSize(18).fontWeight(FontWeight.Bold)
          Text('æ”¯æŒé¡¹ç›®å‘å±•').fontSize(14)
          Text('  ç‚¹å‡»è·³è½¬åˆ°çˆ±å‘ç”µèµåŠ©é¡µé¢').fontSize(14).fontColor($r('app.color.diff_content')).onClick(() => {
            this.openLink()
          })
        }.width('95%').backgroundColor($r('app.color.background')).margin({bottom:5}).padding(12).borderRadius(16)

      }.padding(12)

      // åˆ†éš”çº¿å’Œåº•éƒ¨æ–‡å­—
      Column() {
        Divider()
          .strokeWidth(1)
          .color($r('app.color.border'))
          .margin({ bottom: 20 })
          .width('100%')

        Text('æˆ‘ä»¬å°†å°½å¿«å›å¤æ‚¨çš„æ¶ˆæ¯')
          .fontSize(12)
          .margin({ bottom: 4 })

        Text('æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼')
          .fontSize(12)
      }
      .width('100%')
      .alignItems(HorizontalAlign.Center)
      .margin({ top: 8 })
    }
    .height('80%')
    .margin({ top: 10, bottom: 10 })
    .width('90%')
    .borderRadius(20)
    .backgroundColor($r('app.color.backcolor'))
    .shadow({
      radius: 20,
      color: Color.Gray,
      offsetX: 0,
      offsetY: 4
    })
  }

  async openLink() {
    const url = 'https://afdian.com/a/shenjack';
    const ui_content = this.getUIContext();
    const prompt_action = ui_content.getPromptAction();
    ui_content.showAlertDialog({
      title: 'æ˜¯å¦è·³è½¬åˆ°æµè§ˆå™¨',
      message: 'å³å°†è®¿é—®çˆ±å‘ç”µ',
      primaryButton: {
        value: 'å–æ¶ˆ',
        fontColor: Color.Red,
        action: () => {
          console.log('ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®');
        },
      },
      secondaryButton: {
        value: 'ç¡®å®š',
        fontColor: Color.Blue,
        action: async (): Promise<void> => {
          try {
            prompt_action.showToast({ message: 'æ­£åœ¨è·³è½¬...', duration: 500 });
            let context = ui_content.getHostContext() as common.UIAbilityContext;
            await context.startAbility({
              action: "ohos.want.action.viewData",
              entities: ["entity.system.browsable"],
              uri: url
            } as Want);
          } catch (error) {
            console.error('æ‰“å¼€é“¾æ¥å¤±è´¥:', (error as BusinessError).message);
            prompt_action.showToast({ message: 'æ‰“å¼€é“¾æ¥å¤±è´¥', duration: 1000 });
          }
        }
      },
    })
  }

  async copyToClipboard(text: string, message: string): Promise<void> {
    try {
      let pasteData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, text)
      let systemPasteboard = pasteboard.getSystemPasteboard()
      await systemPasteboard.setData(pasteData)
      prompt.showToast({
        message: `å·²å¤åˆ¶${message}`,
        duration: 2000
      })
    } catch (error) {
      const err: BusinessError = error as BusinessError
      console.error(`å¤åˆ¶å¤±è´¥ï¼Œé”™è¯¯ç ï¼š${err.code}, ä¿¡æ¯ï¼š${err.message}`)
      prompt.showToast({
        message: 'å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•',
        duration: 2000
      })
    }
  }
}